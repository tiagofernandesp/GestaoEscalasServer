-- MySQL Script generated by MySQL Workbench
-- 07/10/15 17:19:14
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema gestaoescalas
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema gestaoescalas
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `gestaoescalas` DEFAULT CHARACTER SET utf8 ;
USE `gestaoescalas` ;

-- -----------------------------------------------------
-- Table `gestaoescalas`.`categoria`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestaoescalas`.`categoria` (
  `Id` INT(11) NOT NULL AUTO_INCREMENT,
  `Designacao` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`Id`))
ENGINE = InnoDB
AUTO_INCREMENT = 7
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `gestaoescalas`.`configuracao`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestaoescalas`.`configuracao` (
  `Id` INT(11) NOT NULL AUTO_INCREMENT,
  `NomePosto` VARCHAR(200) NOT NULL,
  `NFolgasSemanais` INT(11) NOT NULL,
  `NDiasFeriasAnuais` INT(11) NOT NULL,
  PRIMARY KEY (`Id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `gestaoescalas`.`tipogratificado`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestaoescalas`.`tipogratificado` (
  `Id` INT(11) NOT NULL AUTO_INCREMENT,
  `Nome` VARCHAR(100) NOT NULL,
  `Prefixo` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`Id`))
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `gestaoescalas`.`viatura`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestaoescalas`.`viatura` (
  `Id` INT(11) NOT NULL AUTO_INCREMENT,
  `Descricao` VARCHAR(100) NULL DEFAULT NULL,
  `Matricula` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`Id`))
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `gestaoescalas`.`gratificado`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestaoescalas`.`gratificado` (
  `Id` INT(11) NOT NULL AUTO_INCREMENT,
  `HoraInicio` TIME NOT NULL,
  `HoraFim` TIME NOT NULL,
  `Observacao` VARCHAR(300) NULL DEFAULT NULL,
  `Local` VARCHAR(150) NULL DEFAULT NULL,
  `TipoGratificado_Id` INT(11) NOT NULL,
  `Viatura_Id` INT(11) NOT NULL,
  `FRadio` VARCHAR(15) NULL DEFAULT NULL,
  `DataInicio` DATE NOT NULL,
  `DataFim` DATE NOT NULL,
  PRIMARY KEY (`Id`),
  INDEX `Gratificado_TipoGratificado` (`TipoGratificado_Id` ASC),
  INDEX `Gratificado_Viatura` (`Viatura_Id` ASC),
  CONSTRAINT `Gratificado_TipoGratificado`
    FOREIGN KEY (`TipoGratificado_Id`)
    REFERENCES `gestaoescalas`.`tipogratificado` (`Id`),
  CONSTRAINT `Gratificado_Viatura`
    FOREIGN KEY (`Viatura_Id`)
    REFERENCES `gestaoescalas`.`viatura` (`Id`))
ENGINE = InnoDB
AUTO_INCREMENT = 11
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `gestaoescalas`.`pessoa`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestaoescalas`.`pessoa` (
  `Id` INT(11) NOT NULL AUTO_INCREMENT,
  `PNome` VARCHAR(30) NOT NULL,
  `UNome` VARCHAR(30) NOT NULL,
  `Apelido` VARCHAR(30) NOT NULL,
  `Telemovel` VARCHAR(15) NULL DEFAULT NULL,
  `Telefone` VARCHAR(15) NULL DEFAULT NULL,
  `CP` VARCHAR(30) NULL DEFAULT NULL,
  `Rua` VARCHAR(200) NULL DEFAULT NULL,
  `Porta` INT(11) NULL DEFAULT NULL,
  `Cidade` VARCHAR(30) NULL DEFAULT NULL,
  `NumeroGNR` VARCHAR(20) NOT NULL,
  `NumeroPosto` VARCHAR(20) NOT NULL,
  `Ativo` TINYINT(1) NOT NULL,
  `DataIngresso` DATE NOT NULL,
  `Categoria_Id` INT(11) NOT NULL,
  PRIMARY KEY (`Id`),
  INDEX `Pessoa_Categoria` (`Categoria_Id` ASC),
  CONSTRAINT `Pessoa_Categoria`
    FOREIGN KEY (`Categoria_Id`)
    REFERENCES `gestaoescalas`.`categoria` (`Id`))
ENGINE = InnoDB
AUTO_INCREMENT = 13
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `gestaoescalas`.`gratificadopessoa`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestaoescalas`.`gratificadopessoa` (
  `Id` INT(11) NOT NULL AUTO_INCREMENT,
  `Gratificado_Id` INT(11) NOT NULL,
  `Pessoa_Id` INT(11) NOT NULL,
  `Status` INT(11) NOT NULL,
  `Erro` VARCHAR(100) NULL DEFAULT NULL,
  `Data` DATE NOT NULL,
  PRIMARY KEY (`Id`),
  INDEX `GratificadoPessoa_Gratificado` (`Gratificado_Id` ASC),
  INDEX `GratificadoPessoa_Pessoa` (`Pessoa_Id` ASC),
  CONSTRAINT `GratificadoPessoa_Gratificado`
    FOREIGN KEY (`Gratificado_Id`)
    REFERENCES `gestaoescalas`.`gratificado` (`Id`),
  CONSTRAINT `GratificadoPessoa_Pessoa`
    FOREIGN KEY (`Pessoa_Id`)
    REFERENCES `gestaoescalas`.`pessoa` (`Id`))
ENGINE = InnoDB
AUTO_INCREMENT = 9
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `gestaoescalas`.`tiposervico`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestaoescalas`.`tiposervico` (
  `Id` INT(11) NOT NULL AUTO_INCREMENT,
  `Nome` VARCHAR(50) NOT NULL,
  `Prefixo` VARCHAR(10) NOT NULL,
  `HoraInicio` INT(11) NOT NULL,
  `HoraFim` INT(11) NOT NULL,
  `ServicoMinimo` TINYINT(1) NOT NULL,
  `ServicoRepetitivo` TINYINT(1) NOT NULL,
  PRIMARY KEY (`Id`))
ENGINE = InnoDB
AUTO_INCREMENT = 6
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `gestaoescalas`.`habilitaservico`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestaoescalas`.`habilitaservico` (
  `Id` INT(11) NOT NULL AUTO_INCREMENT,
  `Pessoa_Id` INT(11) NOT NULL,
  `TipoServico_Id` INT(11) NOT NULL,
  PRIMARY KEY (`Id`),
  INDEX `HabilitaServico_Pessoa` (`Pessoa_Id` ASC),
  INDEX `HabilitaServico_TipoServico` (`TipoServico_Id` ASC),
  CONSTRAINT `HabilitaServico_Pessoa`
    FOREIGN KEY (`Pessoa_Id`)
    REFERENCES `gestaoescalas`.`pessoa` (`Id`),
  CONSTRAINT `HabilitaServico_TipoServico`
    FOREIGN KEY (`TipoServico_Id`)
    REFERENCES `gestaoescalas`.`tiposervico` (`Id`))
ENGINE = InnoDB
AUTO_INCREMENT = 47
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `gestaoescalas`.`servico`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestaoescalas`.`servico` (
  `Id` INT(11) NOT NULL AUTO_INCREMENT,
  `HoraInicio` TIME NOT NULL,
  `HoraFim` TIME NOT NULL,
  `Data` DATE NOT NULL,
  `Observacao` VARCHAR(300) NULL DEFAULT NULL,
  `Numero` INT(11) NOT NULL,
  `Composicao` VARCHAR(500) NULL DEFAULT NULL,
  `Titulo` VARCHAR(100) NULL DEFAULT NULL,
  `Itenerario` VARCHAR(200) NULL DEFAULT NULL,
  `Viatura_Id` INT(11) NOT NULL,
  `TipoServico_Id` INT(11) NOT NULL,
  `FRadio` VARCHAR(15) NULL DEFAULT NULL,
  `DataInicio` DATE NOT NULL,
  `DataFim` DATE NOT NULL,
  PRIMARY KEY (`Id`),
  INDEX `Servico_TipoServico` (`TipoServico_Id` ASC),
  INDEX `Servico_Viatura` (`Viatura_Id` ASC),
  CONSTRAINT `Servico_TipoServico`
    FOREIGN KEY (`TipoServico_Id`)
    REFERENCES `gestaoescalas`.`tiposervico` (`Id`),
  CONSTRAINT `Servico_Viatura`
    FOREIGN KEY (`Viatura_Id`)
    REFERENCES `gestaoescalas`.`viatura` (`Id`))
ENGINE = InnoDB
AUTO_INCREMENT = 26
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `gestaoescalas`.`servicopessoa`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestaoescalas`.`servicopessoa` (
  `Id` INT(11) NOT NULL AUTO_INCREMENT,
  `Servico_Id` INT(11) NOT NULL,
  `Pessoa_Id` INT(11) NOT NULL,
  `Status` INT(11) NOT NULL,
  `Erro` VARCHAR(100) NULL DEFAULT NULL,
  `Data` DATE NOT NULL,
  PRIMARY KEY (`Id`),
  INDEX `ServicoPessoa_Pessoa` (`Pessoa_Id` ASC),
  INDEX `ServicoPessoa_Servico` (`Servico_Id` ASC),
  CONSTRAINT `ServicoPessoa_Pessoa`
    FOREIGN KEY (`Pessoa_Id`)
    REFERENCES `gestaoescalas`.`pessoa` (`Id`),
  CONSTRAINT `ServicoPessoa_Servico`
    FOREIGN KEY (`Servico_Id`)
    REFERENCES `gestaoescalas`.`servico` (`Id`))
ENGINE = InnoDB
AUTO_INCREMENT = 65
DEFAULT CHARACTER SET = utf8;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
